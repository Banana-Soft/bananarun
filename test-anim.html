<html>
	<head>
		<script src="jquery.min.js"></script>
		<script type="text/javascript">
			var counter = 0;
			var index   = 0;
			var inc     = 1;

			$(document).ready (function () { 
				window.setInterval (function () {
					switch (index) {
						case 0: createRedBeat ();
								break;
						case 1: createBlueBeat ();
								break;
						case 2: createYellowBeat ();
								break;
						case 3: createGreenBeat ();
								break;
					}
					

					if (index == 3) {
						inc = -1;
					}
					else if (index == 0) {
						inc = 1;
					}
					index += inc;


				}, 500);
			});

			function createRedBeat () {
				createBeat (counter ++, 'red', '44%', '20%');
			}

			function createBlueBeat () {
				createBeat (counter ++, 'blue', '48%', '40%');
			}

			function createYellowBeat () {
				createBeat (counter ++, 'yellow', '52%', '60%');
			}

			function createGreenBeat () {
				createBeat (counter ++, 'green', '56%', '80%');
			}

			function createBeat (index, color, leftStart, leftEnd) {
				var beat = document.createElement ('div');
				beat.id = 'ball_' + index;

				$('#container').append (beat);
				$(beat).css ('left', leftStart);
				$(beat).addClass (color);
				$(beat).animate ({'top': '89%', 'left':leftEnd, 'height': '1.5em', 'width': '1.5em', 'border-radius': '1.5em'}, 5000, 'linear', 
					function () {
						$(beat).remove ();
						//$('#target_' + color).css('opacity', 1);
						$('#target_' + color).fadeTo (0, 1).fadeTo(1000, 0.5);
				});
			}




		</script>
		<style type="text/css">
			#container div {
				border: solid 1px #000000;
				width: 1em;
				height: 1em;
				border-radius: 1em;
				position: absolute;	
			}

			#container .red {
				background-color: #FF0000;
			}

			#container .green {
				background-color: #00FF00;
			}

			#container .blue {
				background-color: #0000FF;
			}

			#container .yellow {
				background-color: #FFFF00;
			}			

			#startpoints > div {
				width: 1em;
				height: 1em;
				top: 0%;
				position: absolute;
				border-radius: 1em;
				opacity: 0.5;

			}

			#startpoints > #target_red {
				border: solid 2px #FF0000;
				left: 44%;
			}

			#endpoints > div {
				width: 1.5em;
				height: 1.5em;
				top: 89%;
				position: absolute;
				border-radius: 1.5em;
				opacity: 0.5;
			}


			#endpoints .red {
				border: solid 4px #FF0000;
				left: 20%;
			}
		</style>
	</head>
	<body >
		<header>
			<button onclick='javascript:createRedBeat();'>Click me</button>
			<button onclick='javascript:createYellowBeat();'>Click me</button>
			<button onclick='javascript:createGreenBeat();'>Click me</button>
			<button onclick='javascript:createBlueBeat();'>Click me</button>
		</header>
		<div id="container">
		</div>
		<div id="endpoints">
			<div id="target_red" class='red'></div>
			<div id="target_yellow" class='yellow'></div>
			<div id="target_green" class='green'></div>
			<div id="target_blue" class='blue'></div>
		</div>
		<div id="startpoints">
			<div id="target_red" class='red'></div>
			<div id="target_yellow" class='yellow'></div>
			<div id="target_green" class='green'></div>
			<div id="target_blue" class='blue'></div>
		</div>
	</body>
</html>